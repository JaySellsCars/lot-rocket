<!-- /public/index.html  (REPLACE ENTIRE FILE) -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="theme-color" content="#111827" />
  <title>Lot Rocket</title>

  <!-- KONVA / FABRIC / JSZIP -->
  <script src="https://unpkg.com/konva/konva.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.0/fabric.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<!-- ========================= -->
<!-- SIDE TOOL MODALS (OVERLAYS) -->
<!-- ========================= -->

<!-- OBJECTION COACH -->
<section id="objectionModal" class="side-modal hidden" aria-hidden="true">
  <div class="side-modal-content">
    <div class="side-modal-header">
      <h3>Objection Coach</h3>
      <button class="side-modal-close" type="button" data-close>‚úï</button>
    </div>
    <div class="side-modal-body">
      <textarea id="objectionInput" placeholder="Paste the customer objection here..."></textarea>
      <button id="objectionRunBtn" class="secondary-btn full" type="button" style="margin-top:.8rem;">Generate Response</button>
      <div id="objectionOutput" class="small-note" style="margin-top:1rem; white-space:pre-wrap;"></div>
    </div>
  </div>
</section>

<!-- CALCULATOR -->
<section id="calcModal" class="side-modal hidden" aria-hidden="true">
  <div class="side-modal-content">
    <div class="side-modal-header">
      <h3>Calculator</h3>
      <button class="side-modal-close" type="button" data-close>‚úï</button>
    </div>
    <div class="side-modal-body calculator-body">
      <input id="calcDisplay" type="text" placeholder="0" />
      <div class="calc-grid">
        <button type="button" data-calc="7">7</button><button type="button" data-calc="8">8</button><button type="button" data-calc="9">9</button><button type="button" data-calc="/">√∑</button>
        <button type="button" data-calc="4">4</button><button type="button" data-calc="5">5</button><button type="button" data-calc="6">6</button><button type="button" data-calc="*">√ó</button>
        <button type="button" data-calc="1">1</button><button type="button" data-calc="2">2</button><button type="button" data-calc="3">3</button><button type="button" data-calc="-">‚àí</button>
        <button type="button" data-calc="0">0</button><button type="button" data-calc=".">.</button><button type="button" data-calc="=">=</button><button type="button" data-calc="+">+</button>
      </div>
      <button id="calcClearBtn" class="secondary-btn full" type="button">Clear</button>
    </div>
  </div>
</section>

<!-- PAYMENT CALCULATOR -->
<section id="paymentModal" class="side-modal hidden" aria-hidden="true">
  <div class="side-modal-content">
    <div class="side-modal-header">
      <h3>Payment Calculator</h3>
      <button class="side-modal-close" type="button" data-close>‚úï</button>
    </div>
    <div class="side-modal-body">
      <label class="field"><span>Price</span><input id="payPrice" type="number" step="0.01" placeholder="e.g. 25000" /></label>
      <label class="field"><span>Down Payment</span><input id="payDown" type="number" step="0.01" placeholder="e.g. 2000" /></label>
      <label class="field"><span>APR %</span><input id="payApr" type="number" step="0.01" placeholder="e.g. 9.99" /></label>
      <label class="field"><span>Term (months)</span><input id="payTerm" type="number" step="1" placeholder="e.g. 72" /></label>
      <button id="payCalcBtn" class="secondary-btn full" type="button" style="margin-top:.8rem;">Calculate</button>
      <div id="payOutput" class="small-note" style="margin-top:1rem; white-space:pre-wrap;"></div>
    </div>
  </div>
</section>

<!-- INCOME CALCULATOR -->
<section id="incomeModal" class="side-modal hidden" aria-hidden="true">
  <div class="side-modal-content">
    <div class="side-modal-header">
      <h3>Income Calculator</h3>
      <button class="side-modal-close" type="button" data-close>‚úï</button>
    </div>
    <div class="side-modal-body">
      <label class="field"><span>Gross to date</span><input id="incomeMtd" type="number" step="0.01" placeholder="e.g. 32000" /></label>
      <label class="field"><span>Last pay date</span><input id="incomeLastPayDate" type="date" /></label>
      <button id="incomeCalcBtn" class="secondary-btn full" type="button" style="margin-top:.8rem;">Estimate Income</button>
      <div id="incomeOutput" class="small-note" style="margin-top:1rem; white-space:pre-wrap;"></div>
    </div>
  </div>
</section>

<!-- AI WORKFLOW EXPERT -->
<section id="workflowModal" class="side-modal hidden" aria-hidden="true">
  <div class="side-modal-content">
    <div class="side-modal-header">
      <h3>AI Work Flow Expert</h3>
      <button class="side-modal-close" type="button" data-close>‚úï</button>
    </div>
    <div class="side-modal-body">
      <textarea id="workflowInput" placeholder="Describe the situation/workflow you want to improve..."></textarea>
      <button id="workflowRunBtn" class="secondary-btn full" type="button" style="margin-top:.8rem;">Generate</button>
      <div id="workflowOutput" class="small-note" style="margin-top:1rem; white-space:pre-wrap;"></div>
    </div>
  </div>
</section>

<!-- AI MESSAGE BUILDER -->
<section id="messageModal" class="side-modal hidden" aria-hidden="true">
  <div class="side-modal-content">
    <div class="side-modal-header">
      <h3>AI Message Builder</h3>
      <button class="side-modal-close" type="button" data-close>‚úï</button>
    </div>
    <div class="side-modal-body">
      <textarea id="messageInput" placeholder="Who are you messaging and what‚Äôs the goal?"></textarea>
      <button id="messageRunBtn" class="secondary-btn full" type="button" style="margin-top:.8rem;">Generate</button>
      <div id="messageOutput" class="small-note" style="margin-top:1rem; white-space:pre-wrap;"></div>
    </div>
  </div>
</section>

<!-- ASK AI -->
<section id="askModal" class="side-modal hidden" aria-hidden="true">
  <div class="side-modal-content">
    <div class="side-modal-header">
      <h3>Ask A.I.</h3>
      <button class="side-modal-close" type="button" data-close>‚úï</button>
    </div>
    <div class="side-modal-body">
      <textarea id="askInput" placeholder="Ask anything..."></textarea>
      <button id="askRunBtn" class="secondary-btn full" type="button" style="margin-top:.8rem;">Ask</button>
      <div id="askOutput" class="small-note" style="margin-top:1rem; white-space:pre-wrap;"></div>
    </div>
  </div>
</section>

<!-- AI CAR EXPERT -->
<section id="carExpertModal" class="side-modal hidden" aria-hidden="true">
  <div class="side-modal-content">
    <div class="side-modal-header">
      <h3>AI Car Expert</h3>
      <button class="side-modal-close" type="button" data-close>‚úï</button>
    </div>
    <div class="side-modal-body">
      <textarea id="carExpertInput" placeholder="Ask a car question (trim, towing, reliability, comparisons, etc.)"></textarea>
      <button id="carExpertRunBtn" class="secondary-btn full" type="button" style="margin-top:.8rem;">Generate</button>
      <div id="carExpertOutput" class="small-note" style="margin-top:1rem; white-space:pre-wrap;"></div>
    </div>
  </div>
</section>

  <link rel="stylesheet" href="/style.css?v=10001" />
</head>

<body class="dark-theme">

  <!-- HEADER -->
  <header class="app-header">
    <div class="branding">
      <h1>üöÄ Lot Rocket</h1>
      <p>AI Social Media Kit &amp; Creative Lab for Car Sales Pros</p>
    </div>
  </header>

  <!-- FLOATING TOOLS (RIGHT RAIL) -->
  <div class="floating-tools" aria-label="Floating Tools">
    <button class="tool-button" id="toolObjectionBtn" type="button">Objection Coach</button>
    <button class="tool-button" id="toolCalcBtn" type="button">Calculator</button>
    <button class="tool-button" id="toolPaymentBtn" type="button">Payment Calculator</button>
    <button class="tool-button" id="toolIncomeBtn" type="button">Income Calculator</button>

    <button class="tool-button" id="toolWorkflowBtn" type="button">AI Work Flow Expert</button>
    <button class="tool-button" id="toolMessageBtn" type="button">AI Message Builder</button>
    <button class="tool-button" id="toolAskBtn" type="button">Ask A.I.</button>
    <button class="tool-button" id="toolCarBtn" type="button">AI Car Expert</button>

    <!-- hidden v1 by app.js wiring -->
    <button class="tool-button" id="toolImageBtn" type="button">AI Image Generation</button>
    <button class="tool-button" id="toolVideoBtn" type="button">AI Video Generation</button>
  </div>

  <!-- MAIN LAYOUT GRID -->
  <main id="appMain" class="layout">

    <!-- LEFT COLUMN (STEP 1) -->
    <div class="column">
      <section id="step1" class="lab-card">
        <h3>Step 1 ‚Äì Dealer URL Scraper</h3>

        <label class="field">
          <span>Dealer Vehicle URL</span>
          <input id="dealerUrlInput" type="url" placeholder="Paste vehicle URL here..." />
        </label>

        <label class="field">
          <span>Vehicle Label (optional override)</span>
          <input id="vehicleLabelInput" type="text" placeholder="Example: 2024 Chevy Silverado LTZ 4x4" />
        </label>

        <label class="field">
          <span>Price / Offer (optional override)</span>
          <input id="priceOfferInput" type="text" placeholder="Example: $699/mo or $47,995 + tax" />
        </label>

        <div class="summary-box inner-summary" id="summarySnapshot">
          <div class="small-note">Lot Rocket will scrape the page and pull title, price, description, and photos.</div>
          <div id="summaryOutput" style="margin-top:.8rem;"></div>
        </div>

        <button id="boostBtn" class="primary-btn full summary-btn" type="button">Boost This Listing</button>

        <div class="summary-box" style="margin-top:1rem;">
          <h3 style="margin-bottom:.5rem;">Photos pulled from dealer site</h3>
          <div class="small-note">Click ‚ÄúBoost This Listing‚Äù to refresh photos. Up to 24 images.</div>

          <button id="sendToDesignStudio" class="secondary-btn full" type="button">
            Send Selected Photos to Creative Lab
          </button>

          <div id="step1Photos" class="photo-grid"></div>
        </div>
      </section>
    </div>

    <!-- RIGHT COLUMN (STEP 2 TILE GRID) -->
    <div class="column">
      <section id="step2" class="lab-card">
        <h3>Step 2 ‚Äì Social Media Kit</h3>
        <div class="small-note step2-subtitle">Copy, tweak, and paste into each platform. Spin fresh versions anytime.</div>

        <div class="step2-grid">
          <div class="platform-card step2-card">
            <h3>Facebook Post</h3>
            <textarea id="fbOutput" placeholder="Output..."></textarea>
            <div class="btn-row">
              <button id="fbNewBtn" class="regen-btn" type="button">New Post</button>
              <button id="fbCopyBtn" class="copy-btn" type="button">Copy</button>
              <button id="fbEmojiBtn" class="emoji-strip-btn" type="button">Remove Emojis</button>
            </div>
          </div>

          <div class="platform-card step2-card">
            <h3>Instagram Caption</h3>
            <textarea id="igOutput" placeholder="Output..."></textarea>
            <div class="btn-row">
              <button id="igNewBtn" class="regen-btn" type="button">New Post</button>
              <button id="igCopyBtn" class="copy-btn" type="button">Copy</button>
              <button id="igEmojiBtn" class="emoji-strip-btn" type="button">Remove Emojis</button>
            </div>
          </div>

          <div class="platform-card step2-card">
            <h3>TikTok Caption</h3>
            <textarea id="ttOutput" placeholder="Output..."></textarea>
            <div class="btn-row">
              <button id="ttNewBtn" class="regen-btn" type="button">New Post</button>
              <button id="ttCopyBtn" class="copy-btn" type="button">Copy</button>
              <button id="ttEmojiBtn" class="emoji-strip-btn" type="button">Remove Emojis</button>
            </div>
          </div>

          <div class="platform-card step2-card">
            <h3>LinkedIn Post</h3>
            <textarea id="liOutput" placeholder="Output..."></textarea>
            <div class="btn-row">
              <button id="liNewBtn" class="regen-btn" type="button">New Post</button>
              <button id="liCopyBtn" class="copy-btn" type="button">Copy</button>
              <button id="liEmojiBtn" class="emoji-strip-btn" type="button">Remove Emojis</button>
            </div>
          </div>

          <div class="platform-card step2-card">
            <h3>X / Twitter Post</h3>
            <textarea id="xOutput" placeholder="Output..."></textarea>
            <div class="btn-row">
              <button id="xNewBtn" class="regen-btn" type="button">New Post</button>
              <button id="xCopyBtn" class="copy-btn" type="button">Copy</button>
              <button id="xEmojiBtn" class="emoji-strip-btn" type="button">Remove Emojis</button>
            </div>
          </div>

          <div class="platform-card step2-card">
            <h3>Text / DM</h3>
            <textarea id="dmOutput" placeholder="Output..."></textarea>
            <div class="btn-row">
              <button id="dmNewBtn" class="regen-btn" type="button">New Text</button>
              <button id="dmCopyBtn" class="copy-btn" type="button">Copy</button>
              <button id="dmEmojiBtn" class="emoji-strip-btn" type="button">Remove Emojis</button>
            </div>
          </div>

          <div class="platform-card step2-card">
            <h3>Marketplace Listing</h3>
            <textarea id="marketplaceOutput" placeholder="Output..."></textarea>
            <div class="btn-row">
              <button id="mkNewBtn" class="regen-btn" type="button">New Post</button>
              <button id="mkCopyBtn" class="copy-btn" type="button">Copy</button>
              <button id="mkEmojiBtn" class="emoji-strip-btn" type="button">Remove Emojis</button>
            </div>
          </div>

          <div class="platform-card step2-card">
            <h3>Hashtag Set</h3>
            <textarea id="hashtagsOutput" placeholder="Output..."></textarea>
            <div class="btn-row">
              <button id="hashNewBtn" class="regen-btn" type="button">New Set</button>
              <button id="hashCopyBtn" class="copy-btn" type="button">Copy</button>
              <button id="hashEmojiBtn" class="emoji-strip-btn" type="button">Remove Emojis</button>
            </div>
          </div>
        </div>
      </section>
    </div>

    <!-- STEP 3 FULL WIDTH -->
    <section id="creativeHub" class="lab-card creativeHubFull">
      <h3>Step 3 ‚Äì Creative Lab</h3>

      <!-- Holding thumbnails -->
      <div id="holdingZone"></div>

      <!-- Bottom Social Ready Strip -->
      <section class="lab-card social-ready-panel social-ready-bottom" id="socialReadyPanel">
        <div class="panel-header">
          <h3>Social Ready Strip</h3>
          <p class="small-note">Double-click a Step 3 photo to add it here. Preview + download when ready.</p>
        </div>

        <div class="social-ready-row">
          <button id="socialCarouselPrev" class="ghost-circle-btn" type="button">‚óÄ</button>

          <div class="social-ready-center">
            <div class="small-note" style="margin-bottom:.35rem;">üñºÔ∏è Preview</div>
            <img id="socialCarouselPreviewImg" alt="Preview" />
            <div id="socialCarouselStatus" class="small-note" style="margin-top:.5rem;"></div>
          </div>

          <button id="socialCarouselNext" class="ghost-circle-btn" type="button">‚ñ∂</button>
        </div>

        <div id="socialCarousel"></div>

        <div class="social-carousel-actions">
          <button id="sendSelectedToSocialReady" class="secondary-btn" type="button">Send Selected to Social Ready</button>
          <button id="downloadZipBtn" class="secondary-btn" type="button">Download ZIP</button>
        </div>
      </section>

      <!-- Design Studio hidden for v1 -->
      <div id="designStudioWrap" class="hidden" aria-hidden="true">
        <div id="designStudioHost" class="tuner-preview"></div>
        <div id="tunerControls"></div>
      </div>
    </section>

  </main>

  <!-- ==================================================
       SIDE MODALS (REQUIRED FOR FLOATING TOOLS)
       IDs match app.js wiring:
       objectionModal, calcModal, paymentModal, incomeModal,
       workflowModal, messageModal, askModal, carExpertModal
  ================================================== -->

  <!-- Objection Coach -->
  <section id="objectionModal" class="side-modal hidden" aria-hidden="true">
    <div class="side-modal-content">
      <div class="side-modal-header">
        <h3>Objection Coach</h3>
        <button class="side-modal-close" type="button" data-close>‚úï</button>
      </div>
      <div class="side-modal-body">
        <textarea id="objectionInput" placeholder="Type the customer objection‚Ä¶"></textarea>
        <div class="btn-row" style="justify-content:flex-start;">
          <button id="objectionGoBtn" class="secondary-btn" type="button">Coach Me</button>
        </div>
        <div id="objectionOutput" class="small-note" style="margin-top:.8rem; white-space:pre-wrap;"></div>
      </div>
    </div>
  </section>

  <!-- Calculator -->
  <section id="calcModal" class="side-modal hidden" aria-hidden="true">
    <div class="side-modal-content">
      <div class="side-modal-header">
        <h3>Calculator</h3>
        <button class="side-modal-close" type="button" data-close>‚úï</button>
      </div>
      <div class="side-modal-body">
        <div class="calculator-body">
          <input id="calcDisplay" type="text" placeholder="0" />
          <div class="calc-grid">
            <button type="button" data-calc="7">7</button>
            <button type="button" data-calc="8">8</button>
            <button type="button" data-calc="9">9</button>
            <button type="button" data-calc="/">√∑</button>
            <button type="button" data-calc="4">4</button>
            <button type="button" data-calc="5">5</button>
            <button type="button" data-calc="6">6</button>
            <button type="button" data-calc="*">√ó</button>
            <button type="button" data-calc="1">1</button>
            <button type="button" data-calc="2">2</button>
            <button type="button" data-calc="3">3</button>
            <button type="button" data-calc="-">‚àí</button>
            <button type="button" data-calc="0">0</button>
            <button type="button" data-calc=".">.</button>
            <button type="button" data-calc="=">=</button>
            <button type="button" data-calc="+">+</button>
            <button type="button" data-calc="C">C</button>
            <button type="button" data-calc="‚å´">‚å´</button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Payment Calculator -->
  <section id="paymentModal" class="side-modal hidden" aria-hidden="true">
    <div class="side-modal-content">
      <div class="side-modal-header">
        <h3>Payment Calculator</h3>
        <button class="side-modal-close" type="button" data-close>‚úï</button>
      </div>
      <div class="side-modal-body">
        <label class="field"><span>Vehicle Price</span><input id="payPrice" type="number" step="0.01" placeholder="e.g. 27995" /></label>
        <label class="field"><span>Down Payment</span><input id="payDown" type="number" step="0.01" placeholder="e.g. 1000" /></label>
        <label class="field"><span>APR %</span><input id="payApr" type="number" step="0.01" placeholder="e.g. 9.99" /></label>
        <label class="field"><span>Term (months)</span><input id="payTerm" type="number" step="1" placeholder="e.g. 72" /></label>
        <div class="btn-row" style="justify-content:flex-start;">
          <button id="payCalcBtn" class="secondary-btn" type="button">Calculate</button>
        </div>
        <div id="payOutput" class="small-note" style="margin-top:.8rem; white-space:pre-wrap;"></div>
      </div>
    </div>
  </section>

  <!-- Income Calculator -->
  <section id="incomeModal" class="side-modal hidden" aria-hidden="true">
    <div class="side-modal-content">
      <div class="side-modal-header">
        <h3>Income Calculator</h3>
        <button class="side-modal-close" type="button" data-close>‚úï</button>
      </div>
      <div class="side-modal-body">
        <label class="field"><span>Gross to date</span><input id="incomeMtd" type="number" step="0.01" placeholder="e.g. 32000" /></label>
        <label class="field"><span>Last pay date</span><input id="incomeLastPayDate" type="date" /></label>
        <div class="btn-row" style="justify-content:flex-start;">
          <button id="incomeCalcBtn" class="secondary-btn" type="button">Estimate Income</button>
        </div>
        <div id="incomeOutput" class="small-note" style="margin-top:.8rem; white-space:pre-wrap;"></div>
      </div>
    </div>
  </section>

  <!-- AI Workflow Expert -->
  <section id="workflowModal" class="side-modal hidden" aria-hidden="true">
    <div class="side-modal-content">
      <div class="side-modal-header">
        <h3>AI Work Flow Expert</h3>
        <button class="side-modal-close" type="button" data-close>‚úï</button>
      </div>
      <div class="side-modal-body">
        <textarea id="workflowInput" placeholder="Describe the situation and what you want to achieve‚Ä¶"></textarea>
        <div class="btn-row" style="justify-content:flex-start;">
          <button id="workflowGoBtn" class="secondary-btn" type="button">Build My Workflow</button>
        </div>
        <div id="workflowOutput" class="small-note" style="margin-top:.8rem; white-space:pre-wrap;"></div>
      </div>
    </div>
  </section>

  <!-- AI Message Builder -->
  <section id="messageModal" class="side-modal hidden" aria-hidden="true">
    <div class="side-modal-content">
      <div class="side-modal-header">
        <h3>AI Message Builder</h3>
        <button class="side-modal-close" type="button" data-close>‚úï</button>
      </div>
      <div class="side-modal-body">
        <textarea id="messageInput" placeholder="Who are you texting and what‚Äôs the goal?"></textarea>
        <div class="btn-row" style="justify-content:flex-start;">
          <button id="messageGoBtn" class="secondary-btn" type="button">Write My Message</button>
        </div>
        <div id="messageOutput" class="small-note" style="margin-top:.8rem; white-space:pre-wrap;"></div>
      </div>
    </div>
  </section>

  <!-- Ask AI -->
  <section id="askModal" class="side-modal hidden" aria-hidden="true">
    <div class="side-modal-content">
      <div class="side-modal-header">
        <h3>Ask A.I.</h3>
        <button class="side-modal-close" type="button" data-close>‚úï</button>
      </div>
      <div class="side-modal-body">
        <textarea id="askInput" placeholder="Ask anything‚Ä¶"></textarea>
        <div class="btn-row" style="justify-content:flex-start;">
          <button id="askGoBtn" class="secondary-btn" type="button">Ask</button>
        </div>
        <div id="askOutput" class="small-note" style="margin-top:.8rem; white-space:pre-wrap;"></div>
      </div>
    </div>
  </section>

  <!-- AI Car Expert -->
  <section id="carExpertModal" class="side-modal hidden" aria-hidden="true">
    <div class="side-modal-content">
      <div class="side-modal-header">
        <h3>AI Car Expert</h3>
        <button class="side-modal-close" type="button" data-close>‚úï</button>
      </div>
      <div class="side-modal-body">
        <textarea id="carInput" placeholder="Ask about trims, reliability, comparisons, features‚Ä¶"></textarea>
        <div class="btn-row" style="justify-content:flex-start;">
          <button id="carGoBtn" class="secondary-btn" type="button">Get Answer</button>
        </div>
        <div id="carOutput" class="small-note" style="margin-top:.8rem; white-space:pre-wrap;"></div>
      </div>
    </div>
  </section>

  <script src="/app.js?v=10001"></script>
</body>
</html>
